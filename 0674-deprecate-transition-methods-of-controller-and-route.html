<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>0674-deprecate-transition-methods-of-controller-and-route - </title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="affix"><a href="introduction.html">Introduction</a></li><li><a href="0001-transform-attribute-meta-parameter.html">0001-transform-attribute-meta-parameter</a></li><li><a href="0003-block-params.html">0003-block-params</a></li><li><a href="0003-cli-ember-doctor.html">0003-cli-ember-doctor</a></li><li><a href="0010-engines.html">0010-engines</a></li><li><a href="0011-improved-cp-syntax.html">0011-improved-cp-syntax</a></li><li><a href="0012-help-json-output.html">0012-help-json-output</a></li><li><a href="0015-the-road-to-ember-2-0.html">0015-the-road-to-ember-2-0</a></li><li><a href="0020-sri-default.html">0020-sri-default</a></li><li><a href="0023-command-line-completion.html">0023-command-line-completion</a></li><li><a href="0024-bound-attributes.html">0024-bound-attributes</a></li><li><a href="0028-app-import-output-file.html">0028-app-import-output-file</a></li><li><a href="0029-addon-black-and-whitelist-for-apps.html">0029-addon-black-and-whitelist-for-apps</a></li><li><a href="0045-internet-explorer.html">0045-internet-explorer</a></li><li><a href="0046-cli-improved-release-process.html">0046-cli-improved-release-process</a></li><li><a href="0046-registry-reform.html">0046-registry-reform</a></li><li><a href="0050-cli-production-code-stripping.html">0050-cli-production-code-stripping</a></li><li><a href="0050-improved-actions.html">0050-improved-actions</a></li><li><a href="0053-helpers.html">0053-helpers</a></li><li><a href="0055-anonymous-amd.html">0055-anonymous-amd</a></li><li><a href="0056-improved-release-cycle.html">0056-improved-release-cycle</a></li><li><a href="0057-ember-data-reference-unification.html">0057-ember-data-reference-unification</a></li><li><a href="0058-helper-listing.html">0058-helper-listing</a></li><li><a href="0061-ember-data-background-fetch.html">0061-ember-data-background-fetch</a></li><li><a href="0064-contextual-component-lookup.html">0064-contextual-component-lookup</a></li><li><a href="0065-deprecation-warning-handlers.html">0065-deprecation-warning-handlers</a></li><li><a href="0080-serve-file-api.html">0080-serve-file-api</a></li><li><a href="0086-firefox-in-ci.html">0086-firefox-in-ci</a></li><li><a href="0090-addon-tree-caching.html">0090-addon-tree-caching</a></li><li><a href="0091-cli-addon-instrumentation-experimental-hooks.html">0091-cli-addon-instrumentation-experimental-hooks</a></li><li><a href="0091-weakmap.html">0091-weakmap</a></li><li><a href="0092-blueprint-remove-old-files.html">0092-blueprint-remove-old-files</a></li><li><a href="0095-cli-standardise-targets.html">0095-cli-standardise-targets</a></li><li><a href="0095-router-service.html">0095-router-service</a></li><li><a href="0096-enable-yarn-usage.html">0096-enable-yarn-usage</a></li><li><a href="0101-ember-data-friendly-errors.html">0101-ember-data-friendly-errors</a></li><li><a href="0105-addons-optionalDependencies.html">0105-addons-optionalDependencies</a></li><li><a href="0108-add-custom-transform.html">0108-add-custom-transform</a></li><li><a href="0110-packaging.html">0110-packaging</a></li><li><a href="0114-add-template-lint-addon.html">0114-add-template-lint-addon</a></li><li><a href="0116-qunit-dom.html">0116-qunit-dom</a></li><li><a href="0120-cli-guides.html">0120-cli-guides</a></li><li><a href="0120-route-serializers.html">0120-route-serializers</a></li><li><a href="0121-remove-ember-cli-eslint.html">0121-remove-ember-cli-eslint</a></li><li><a href="0136-contains-to-includes.html">0136-contains-to-includes</a></li><li><a href="0139-isHtmlSafe.html">0139-isHtmlSafe</a></li><li><a href="0143-module-unification.html">0143-module-unification</a></li><li><a href="0150-factory-for.html">0150-factory-for</a></li><li><a href="0176-javascript-module-api.html">0176-javascript-module-api</a></li><li><a href="0178-deprecate-ember-k.html">0178-deprecate-ember-k</a></li><li><a href="0181-deprecate-ember-data-initializers.html">0181-deprecate-ember-data-initializers</a></li><li><a href="0186-track-unique-history-location-state.html">0186-track-unique-history-location-state</a></li><li><a href="0191-deprecate-component-lifecycle-hook-args.html">0191-deprecate-component-lifecycle-hook-args</a></li><li><a href="0194-deprecate-custom-event-manager.html">0194-deprecate-custom-event-manager</a></li><li><a href="0213-custom-components.html">0213-custom-components</a></li><li><a href="0225-ember-engines-mount-params.html">0225-ember-engines-mount-params</a></li><li><a href="0226-named-blocks.html">0226-named-blocks</a></li><li><a href="0229-deprecate-testing-restricted-resolver.html">0229-deprecate-testing-restricted-resolver</a></li><li><a href="0232-simplify-qunit-testing-api.html">0232-simplify-qunit-testing-api</a></li><li><a href="0236-deprecation-ember-string.html">0236-deprecation-ember-string</a></li><li><a href="0237-deprecation-ember-map.html">0237-deprecation-ember-map</a></li><li><a href="0240-es-classes.html">0240-es-classes</a></li><li><a href="0252-browser-support-changes.html">0252-browser-support-changes</a></li><li><a href="0268-acceptance-testing-refactor.html">0268-acceptance-testing-refactor</a></li><li><a href="0272-deprecation-native-function-prototype-extensions.html">0272-deprecation-native-function-prototype-extensions</a></li><li><a href="0276-named-args.html">0276-named-args</a></li><li><a href="0278-template-only-components.html">0278-template-only-components</a></li><li><a href="0280-remove-application-wrapper.html">0280-remove-application-wrapper</a></li><li><a href="0281-es5-getters.html">0281-es5-getters</a></li><li><a href="0286-block-let-template-helper.html">0286-block-let-template-helper</a></li><li><a href="0287-promote-in-element-to-public-api.html">0287-promote-in-element-to-public-api</a></li><li><a href="0293-record-data.html">0293-record-data</a></li><li><a href="0294-optional-jquery.html">0294-optional-jquery</a></li><li><a href="0297-deprecate-ember-logger.html">0297-deprecate-ember-logger</a></li><li><a href="0300-rfc-process-update.html">0300-rfc-process-update</a></li><li><a href="0308-deprecate-property-lookup-fallback.html">0308-deprecate-property-lookup-fallback</a></li><li><a href="0311-angle-bracket-invocation.html">0311-angle-bracket-invocation</a></li><li><a href="0318-array-helper.html">0318-array-helper</a></li><li><a href="0322-deprecate-copy-copyable.html">0322-deprecate-copy-copyable</a></li><li><a href="0324-deprecate-component-isvisible.html">0324-deprecate-component-isvisible</a></li><li><a href="0326-ember-data-filter-deprecation.html">0326-ember-data-filter-deprecation</a></li><li><a href="0329-deprecated-ember-evented-in-ember-data.html">0329-deprecated-ember-evented-in-ember-data</a></li><li><a href="0331-deprecate-globals-resolver.html">0331-deprecate-globals-resolver</a></li><li><a href="0332-ember-data-record-links-and-meta.html">0332-ember-data-record-links-and-meta</a></li><li><a href="0335-deprecate-send-action.html">0335-deprecate-send-action</a></li><li><a href="0337-native-class-constructor-update.html">0337-native-class-constructor-update</a></li><li><a href="0340-deprecate-ember-merge.html">0340-deprecate-ember-merge</a></li><li><a href="0345-discord.html">0345-discord</a></li><li><a href="0364-roadmap-2018.html">0364-roadmap-2018</a></li><li><a href="0369-deprecate-computed-clobberability.html">0369-deprecate-computed-clobberability</a></li><li><a href="0370-deprecate-computed-volatile.html">0370-deprecate-computed-volatile</a></li><li><a href="0372-ember-data-model-factory-for.html">0372-ember-data-model-factory-for</a></li><li><a href="0373-Element-Modifier-Managers.html">0373-Element-Modifier-Managers</a></li><li><a href="0375-deprecate-computed-property-modifier.html">0375-deprecate-computed-property-modifier</a></li><li><a href="0386-remove-jquery.html">0386-remove-jquery</a></li><li><a href="0389-dynamic-tag-names.html">0389-dynamic-tag-names</a></li><li><a href="0391-router-helpers.html">0391-router-helpers</a></li><li><a href="0392-deprecate-component-manager-string-lookup.html">0392-deprecate-component-manager-string-lookup</a></li><li><a href="0395-ember-data-packages.html">0395-ember-data-packages</a></li><li><a href="0398-RouteInfo-Metadata.html">0398-RouteInfo-Metadata</a></li><li><a href="0403-ember-data-identifiers.html">0403-ember-data-identifiers</a></li><li><a href="0408-decorators.html">0408-decorators</a></li><li><a href="0410-tracked-properties.html">0410-tracked-properties</a></li><li><a href="0415-render-element-modifiers.html">0415-render-element-modifiers</a></li><li><a href="0416-glimmer-components.html">0416-glimmer-components</a></li><li><a href="0418-deprecate-route-render-methods.html">0418-deprecate-route-render-methods</a></li><li><a href="0421-deprecate-application-controller-props.html">0421-deprecate-application-controller-props</a></li><li><a href="0425-website-redesign.html">0425-website-redesign</a></li><li><a href="0431-guides-restructure.html">0431-guides-restructure</a></li><li><a href="0432-contextual-helpers.html">0432-contextual-helpers</a></li><li><a href="0435-modifier-splattributes.html">0435-modifier-splattributes</a></li><li><a href="0440-decorator-support.html">0440-decorator-support</a></li><li><a href="0445-deprecate-with.html">0445-deprecate-with</a></li><li><a href="0446-contribution-guides.html">0446-contribution-guides</a></li><li><a href="0449-deprecate-partials.html">0449-deprecate-partials</a></li><li><a href="0451-injection-parameter-normalization.html">0451-injection-parameter-normalization</a></li><li><a href="0452-ember-data-medium-term-plan.html">0452-ember-data-medium-term-plan</a></li><li><a href="0457-nested-lookups.html">0457-nested-lookups</a></li><li><a href="0459-angle-bracket-built-in-components.html">0459-angle-bracket-built-in-components</a></li><li><a href="0460-yieldable-named-blocks.html">0460-yieldable-named-blocks</a></li><li><a href="0461-ember-data-singleton-record-data.html">0461-ember-data-singleton-record-data</a></li><li><a href="0463-record-data-state.html">0463-record-data-state</a></li><li><a href="0465-record-data-errors.html">0465-record-data-errors</a></li><li><a href="0466-request-state-service.html">0466-request-state-service</a></li><li><a href="0468-classic-decorator.html">0468-classic-decorator</a></li><li><a href="0470-fn-helper.html">0470-fn-helper</a></li><li><a href="0471-on-modifier.html">0471-on-modifier</a></li><li><a href="0477-blueprints-update.html">0477-blueprints-update</a></li><li><a href="0478-tracked-properties-updates.html">0478-tracked-properties-updates</a></li><li><a href="0481-component-templates-co-location.html">0481-component-templates-co-location</a></li><li><a href="0486-deprecate-mouseenter.html">0486-deprecate-mouseenter</a></li><li><a href="0487-custom-model-classes.html">0487-custom-model-classes</a></li><li><a href="0491-deprecate-disconnect-outlet.html">0491-deprecate-disconnect-outlet</a></li><li><a href="0494-async-observers.html">0494-async-observers</a></li><li><a href="0496-handlebars-strict-mode.html">0496-handlebars-strict-mode</a></li><li><a href="0507-embroider-v2-package-format.html">0507-embroider-v2-package-format</a></li><li><a href="0519-2019-2020-roadmap.html">0519-2019-2020-roadmap</a></li><li><a href="0521-find-by-identifier.html">0521-find-by-identifier</a></li><li><a href="0522-default-serializers-and-adapters.html">0522-default-serializers-and-adapters</a></li><li><a href="0523-model-argument-for-route-templates.html">0523-model-argument-for-route-templates</a></li><li><a href="0554-deprecate-getwithdefault.html">0554-deprecate-getwithdefault</a></li><li><a href="0558-edition-detection.html">0558-edition-detection</a></li><li><a href="0580-destroyables.html">0580-destroyables</a></li><li><a href="0581-new-test-waiters.html">0581-new-test-waiters</a></li><li><a href="0585-improved-ember-registry-apis.html">0585-improved-ember-registry-apis</a></li><li><a href="0615-autotracking-memoization.html">0615-autotracking-memoization</a></li><li><a href="0617-rfc-stages.html">0617-rfc-stages</a></li><li><a href="0625-helper-managers.html">0625-helper-managers</a></li><li><a href="0626-invoke-helper.html">0626-invoke-helper</a></li><li><a href="0628-prettier.html">0628-prettier</a></li><li><a href="0631-refresh-method-for-router-service.html">0631-refresh-method-for-router-service</a></li><li><a href="0635-ember-new-lang.html">0635-ember-new-lang</a></li><li><a href="0637-customizable-test-setups.html">0637-customizable-test-setups</a></li><li><a href="0638-interactive-app-creation.html">0638-interactive-app-creation</a></li><li><a href="0639-replace-blacklist-whitelist.html">0639-replace-blacklist-whitelist</a></li><li><a href="0645-add-ember-page-title-addon.html">0645-add-ember-page-title-addon</a></li><li><a href="0649-deprecation-staging.html">0649-deprecation-staging</a></li><li><a href="0659-unique-id-helper.html">0659-unique-id-helper</a></li><li><a href="0671-modernize-built-in-components-1.html">0671-modernize-built-in-components-1</a></li><li><a href="0673-deprecate-tryinvoke.html">0673-deprecate-tryinvoke</a></li><li><a href="0674-deprecate-transition-methods-of-controller-and-route.html" class="active">0674-deprecate-transition-methods-of-controller-and-route</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title"></h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <hr />
<p>Start Date: 2020-10-12
Relevant Team(s): Ember.js
RFC PR: https://github.com/emberjs/rfcs/pull/674</p>
<hr />
<h1><a class="header" href="#deprecate-transition-methods-of-controller-and-route" id="deprecate-transition-methods-of-controller-and-route">Deprecate transition methods of controller and route</a></h1>
<h2><a class="header" href="#summary" id="summary">Summary</a></h2>
<p>The methods <code>transitionTo</code> and <code>replaceWith</code> of the <code>Route</code> and the methods
<code>transitionToRoute</code> and <code>replaceRoute</code> of <code>Controller</code> should be deprecated.
Existing methods <code>transitionTo</code> and <code>replaceWith</code> of <code>RouterService</code> should
be used instead.</p>
<h2><a class="header" href="#motivation" id="motivation">Motivation</a></h2>
<p>The main motivation is to reduce public API surface related to routing. This
will make the required refactoring of router easier as soon as the methods
have been removed.</p>
<p>The router is known to be poorly documented and underspecified. Especially timing
of the different APIs has been an issue in the past. Some timing related bugs
are open since years.¹</p>
<p>The implementation of <code>Router#transitionTo</code>, <code>Router#replaceWith</code>,
<code>Controller#transitionToRoute</code> and <code>Controller#replaceRoute</code> on one side and
<code>RouterService#transitionTo</code> and <code>RouterService#replaceWith</code> on the other side
are very different. Therefore it's very likely that they have different timings
in edge cases - even if that's not documented. Changing the timing of the
methods is considered a breaking change, which makes refactorings difficult.</p>
<p>Supporting different ways to do the same increases complexity without providing
much value. Especially if it's not only about true shortcuts. Supporting
transitions through <code>RouterService</code> and <code>&lt;LinkTo&gt;</code> component <em>only</em> will reduce
complexity for maintainers.</p>
<p>Additionally it reduces learning costs as new developers do not need to learn
different APIs to do the same thing. The <a href="https://guides.emberjs.com/release/routing/defining-your-routes/#toc_transitioning-between-routes">current guides</a>
showcase this issue by listing all four methods existing today and when they
could be used:</p>
<blockquote>
<p>It depends on where the transition needs to take place:</p>
<ul>
<li>From a template, use <LinkTo /> as mentioned above</li>
<li>From a route, use the transitionTo() method</li>
<li>From a controller, use the transitionToRoute() method</li>
<li>From anywhere else in your application, such as a component, inject the Router Service and use the transitionTo() method</li>
</ul>
</blockquote>
<p>Deprecating <code>Route#transitionTo</code> and <code>Controller#transitionToRoute</code> will reduce
this list to two options without dropping any use case.</p>
<p>Naming <code>RouterService</code> as the only option to trigger a transition in JavaScript
will also help with teaching Ember as a a component-service framework.
<code>RouterService#transitionTo</code> and <code>RouterService#replaceWith</code> are not only
available in <code>Route</code> and <code>Controller</code> but also in any services and components.</p>
<p>The current architecture might mislead developers not being aware of
<code>RouterService</code> to bubble an action up to the controller or route in order to
trigger a transition. Or pass <code>Controller#transitionToRoute</code> or
<code>Controller#replaceRoute</code> methods down to a component as an argument.</p>
<h2><a class="header" href="#transition-path" id="transition-path">Transition Path</a></h2>
<p><code>Router#transitionTo</code>, <code>Route.replaceWith</code>, <code>Controller.transitionToRoute</code>
and <code>Controller.replaceRoute</code> should trigger a deprecation if being used.
The deprecation message should recommend using <code>RouterService#transitionTo</code>
or <code>RouterService#replaceWith</code> instead.</p>
<pre><code class="language-patch">  // app/route/foo.js

  import Route from '@ember/routing/route';
  import { inject as service } from '@ember/service';

  export default class FooRoute extends Route {
+   @service router;
    @service session;

    beforeModel() {
      if (!this.session.isAuthenticated) {
-       this.transitionTo('login');
+       this.router.transitionTo('login');
      }
    }
  }
</code></pre>
<pre><code class="language-patch">  // app/controllers/foo.js

  import Controller from '@ember/controller';
+ import { inject as service } from '@ember/service';

  export default class FooController extends Controller {
+   @service router;
+
    @action
    async save({ title, text }) {
      let post = this.store.createRecord('post', { title, text });
      await post.save();
-     return this.transitionToRoute('post', post.id);
+     return this.router.transitionTo('post', post.id);
    }
  }
</code></pre>
<p>A codemod should be provided, which replaces the usage of <code>transitionTo</code> method
in any class that extends <code>Route</code> and <code>transitionToRoute</code> method in any class
that extends <code>Controller</code> with <code>this.router.transitionTo</code>. The same should be
done for <code>Route#replaceWith</code> and <code>Controller#replaceRoute</code>. Additionally the
<code>RouterService</code> should be injected if needed.</p>
<p>In case consumers face timing issues while refactoring to
<code>RouterService#transitionTo</code> and <code>RouterService#replaceWith</code> they should change
their project to be compatible with the timing provided by these two methods.
The deprecation phase should be long enough to allow all applications to adopt.
For now it's assumed that it will be enough time for all relevant projects to
migrate before <em>v4.0</em> release. The deprecation period might be increased if a
relevant number of projects weren't able to migrate before that date.</p>
<h2><a class="header" href="#how-we-teach-this" id="how-we-teach-this">How We Teach This</a></h2>
<p>The guides need to be updated to only use <code>RouterService#transitionTo</code>,
<code>RouterService#replaceWith</code> and <code>&lt;LinkTo&gt;</code> component in order to trigger
a transition.</p>
<p>The routing guides list available option to transition between routes in
<a href="https://guides.emberjs.com/release/routing/defining-your-routes/#toc_transitioning-between-routes"><em>defining your routes</em> chapter</a>.
As already discussed in motivation section <code>Route#transitionTo</code> and
<code>Controller#transitionToRoute</code> should be removed from that list.</p>
<p>The <a href="https://guides.emberjs.com/release/routing/redirection/"><em>redirecting</em> chapter</a>
of routing guides names <code>Route#transitionTo</code>, <code>Controller#transitionToRoute</code>
and <code>Route#replaceWith</code> as options to trigger a redirect. It doesn't mention
<code>RouterService</code> yet at all. It also doesn't list <code>Controller#replaceRoute</code> as
an option. This two paragraphs should be simplified by naming
<code>RouterService#transitionTo</code> and <code>RouterService#replaceWith</code> only.</p>
<p>The same applies to <a href="https://guides.emberjs.com/release/routing/query-params/#toc_transitionto"><em>transitionTo</em> paragraph of <em>query parameters</em> chapter</a>
of routing guides. Instead of <code>Route#transitionTo</code> and
<code>Controller#transitionToRoute</code> only <code>RouterService#transitionTo</code> should be
mentioned.</p>
<p>Additionally <code>Route.transitionTo</code> is used in some code examples in the guides.
These should be changed to use <code>RouterService#transitionTo</code> instead.</p>
<p>The deprecated methods should be marked as such in the API docs.</p>
<p>No changes to the tutorial are needed. Transitions in the tutorial are done
using <code>&lt;LinkTo&gt;</code> component only.</p>
<h2><a class="header" href="#drawbacks" id="drawbacks">Drawbacks</a></h2>
<p><code>Route#transitionTo</code> is a highly used API in existing applications. Deprecating
it will very likely require changes to nearly all existing applications.</p>
<p>Using <code>RouterService</code> instead of methods directly available on <code>Route</code> or
<code>Controller</code> requires explicit injection of router service. This could be seen
as boilerplate code.</p>
<p>Some editors are able to suggest methods which are available on a class
directly which is the case for <code>Router#transitionTo</code> and the other methods
proposed for deprecation. This makes discovering them very easy. Discovering
methods only being available on services that need to be injected first, is not
that easy. Developers not being familar with the API might need to reach out
to guides or API docs to find them.</p>
<p>Deprecating (and later removing) these four methods will not enforce all
transitions to be triggered by either <code>RouterService#transitionTo</code>,
<code>RouterService#replaceWith</code> or <code>&lt;LinkTo&gt;</code>. A transition could be still
triggered by setting a controller property, which is bound to a query
parameter. But this should be addressed in a separate RFC, which reworks
registration of query parameters in general.</p>
<p>Ember Engines <a href="https://github.com/ember-engines/ember-engines/blob/v0.8.7/packages/ember-engines/addon/-private/route-ext.js">injects <code>Route#transitionToExternal</code>, <code>Route#replaceWithExternal</code></a>
and <a href="https://github.com/ember-engines/ember-engines/blob/v0.8.7/packages/ember-engines/addon/-private/controller-ext.js"><code>Controller#transitionToExternalRoute</code></a>
methods. These methods allow the consumer to transition between routes external
to the engine. Ember Engines <a href="https://github.com/ember-engines/ember-engines/issues/587">does not provide a service like <code>RouterService</code> yet</a>
to do this. But it's <a href="https://github.com/ember-engines/ember-engines/pull/669">under active development</a>.</p>
<p>Ember Engines uses the methods deprecated by this RFC to implement
<code>Route#transitionToExternal</code>, <code>Route#replaceWithExternal</code> and
<code>Controller#transitionToExternalRoute</code>. This will trigger a deprecation warning
for all users of Ember Engines until Ember Engines is refactored to not use the
deprecated methods anymore.</p>
<p>While this RFC does not intend to decision how Ember Engines should address
the deprecations, it will very like force Ember Engines to deprecate
<code>Route#transitionToExternal</code>, <code>Route#replaceWithExternal</code> and
<code>Controller#transitionToExternalRoute</code> de facto in mid-term for two reasons:</p>
<ol>
<li>These methods would not align anymore with the method provided by Ember to
transition between routes.</li>
<li>Ember Engines would not be able to change the implementations of these
methods to not use the methods deprecated by this RFC anymore. Using the
<code>RouterService</code> would very likely change timing and other details of the
methods, which could be seen as breaking changes. Keeping the current
timings and other details would require usage of private method of the
router.</li>
</ol>
<h2><a class="header" href="#alternatives" id="alternatives">Alternatives</a></h2>
<p>Three possible alternative are discovered so far:</p>
<ol>
<li>Instead of deprecating <code>Route#transitionTo</code>, <code>Route#replaceWith</code>,
<code>Controller#transitionToRoute</code> and <code>Controller#replaceWith</code> we could try to
align their implementations to match <code>RouterService#transitionTo</code> and
<code>RouterService.replaceWith</code> in regards to timing and other details.</li>
</ol>
<p>Doing so will very likely require breaking changes as existing applications
do very likely depend onto the existing timings and other details. Even if
not being specified and documented these details became part of our public
API over the years.</p>
<p>Therefore we would need to introduce an optional feature which allows
applications to opt-in into the new timings as soon as they have verifed
everything is working as expected.</p>
<ol start="2">
<li>
<p>We could introduce new methods on <code>Route</code> and <code>Controller</code>, which are true
shortcuts for using <code>RouterService</code>. This would prevent introducing the need
to explicitly inject <code>RouterService</code> in <code>Route</code> and <code>Controller</code> in order to
trigger a transition. As mentioned above this could be seen as boilerplate.</p>
<p>Coming up with good names for these new methods would be challening as most
of the names has been taken already. Additionally introducing new methods on
<code>Controller</code> and <code>Route</code> will not help with reducing public API surface and
teaching a component-service architecture.</p>
</li>
<li>
<p>We could do nothing and continue the different ways to trigger a transition
in JavaScript - including different timings and other details.</p>
</li>
</ol>
<h2><a class="header" href="#unresolved-questions" id="unresolved-questions">Unresolved questions</a></h2>
<p>No open questions have been discovered so far.</p>
<h2><a class="header" href="#footnotes" id="footnotes">Footnotes</a></h2>
<ol>
<li>
<p>Some example for routing related bugs which are open for quite some time
now:</p>
<ul>
<li>https://github.com/emberjs/ember.js/issues/10262</li>
<li>https://github.com/emberjs/ember.js/issues/11152</li>
<li>https://github.com/emberjs/ember.js/issues/12945</li>
<li>https://github.com/emberjs/ember.js/issues/14875</li>
<li>https://github.com/emberjs/ember.js/issues/15801</li>
<li>https://github.com/emberjs/ember.js/issues/18416</li>
<li>https://github.com/emberjs/ember.js/issues/18577</li>
<li>https://github.com/emberjs/ember.js/issues/19037</li>
</ul>
</li>
</ol>
<p>This list does not contain a represantive list of bugs. Neither does it
include bugs, which I verified myself. It's nothing more than a collection
of bug reports that I found by <a href="https://github.com/emberjs/ember.js/search?p=1&amp;q=transitionTo&amp;type=issues">searching for issues containing
<em>transitionTo</em> in ember.js repository</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="0673-deprecate-tryinvoke.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="0673-deprecate-tryinvoke.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
            </nav>

        </div>

        

        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
