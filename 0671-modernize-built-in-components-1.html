<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>0671-modernize-built-in-components-1 - </title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="affix"><a href="introduction.html">Introduction</a></li><li><a href="0001-transform-attribute-meta-parameter.html">0001-transform-attribute-meta-parameter</a></li><li><a href="0003-block-params.html">0003-block-params</a></li><li><a href="0003-cli-ember-doctor.html">0003-cli-ember-doctor</a></li><li><a href="0010-engines.html">0010-engines</a></li><li><a href="0011-improved-cp-syntax.html">0011-improved-cp-syntax</a></li><li><a href="0012-help-json-output.html">0012-help-json-output</a></li><li><a href="0015-the-road-to-ember-2-0.html">0015-the-road-to-ember-2-0</a></li><li><a href="0020-sri-default.html">0020-sri-default</a></li><li><a href="0023-command-line-completion.html">0023-command-line-completion</a></li><li><a href="0024-bound-attributes.html">0024-bound-attributes</a></li><li><a href="0028-app-import-output-file.html">0028-app-import-output-file</a></li><li><a href="0029-addon-black-and-whitelist-for-apps.html">0029-addon-black-and-whitelist-for-apps</a></li><li><a href="0045-internet-explorer.html">0045-internet-explorer</a></li><li><a href="0046-cli-improved-release-process.html">0046-cli-improved-release-process</a></li><li><a href="0046-registry-reform.html">0046-registry-reform</a></li><li><a href="0050-cli-production-code-stripping.html">0050-cli-production-code-stripping</a></li><li><a href="0050-improved-actions.html">0050-improved-actions</a></li><li><a href="0053-helpers.html">0053-helpers</a></li><li><a href="0055-anonymous-amd.html">0055-anonymous-amd</a></li><li><a href="0056-improved-release-cycle.html">0056-improved-release-cycle</a></li><li><a href="0057-ember-data-reference-unification.html">0057-ember-data-reference-unification</a></li><li><a href="0058-helper-listing.html">0058-helper-listing</a></li><li><a href="0061-ember-data-background-fetch.html">0061-ember-data-background-fetch</a></li><li><a href="0064-contextual-component-lookup.html">0064-contextual-component-lookup</a></li><li><a href="0065-deprecation-warning-handlers.html">0065-deprecation-warning-handlers</a></li><li><a href="0080-serve-file-api.html">0080-serve-file-api</a></li><li><a href="0086-firefox-in-ci.html">0086-firefox-in-ci</a></li><li><a href="0090-addon-tree-caching.html">0090-addon-tree-caching</a></li><li><a href="0091-cli-addon-instrumentation-experimental-hooks.html">0091-cli-addon-instrumentation-experimental-hooks</a></li><li><a href="0091-weakmap.html">0091-weakmap</a></li><li><a href="0092-blueprint-remove-old-files.html">0092-blueprint-remove-old-files</a></li><li><a href="0095-cli-standardise-targets.html">0095-cli-standardise-targets</a></li><li><a href="0095-router-service.html">0095-router-service</a></li><li><a href="0096-enable-yarn-usage.html">0096-enable-yarn-usage</a></li><li><a href="0101-ember-data-friendly-errors.html">0101-ember-data-friendly-errors</a></li><li><a href="0105-addons-optionalDependencies.html">0105-addons-optionalDependencies</a></li><li><a href="0108-add-custom-transform.html">0108-add-custom-transform</a></li><li><a href="0110-packaging.html">0110-packaging</a></li><li><a href="0114-add-template-lint-addon.html">0114-add-template-lint-addon</a></li><li><a href="0116-qunit-dom.html">0116-qunit-dom</a></li><li><a href="0120-cli-guides.html">0120-cli-guides</a></li><li><a href="0120-route-serializers.html">0120-route-serializers</a></li><li><a href="0121-remove-ember-cli-eslint.html">0121-remove-ember-cli-eslint</a></li><li><a href="0136-contains-to-includes.html">0136-contains-to-includes</a></li><li><a href="0139-isHtmlSafe.html">0139-isHtmlSafe</a></li><li><a href="0143-module-unification.html">0143-module-unification</a></li><li><a href="0150-factory-for.html">0150-factory-for</a></li><li><a href="0176-javascript-module-api.html">0176-javascript-module-api</a></li><li><a href="0178-deprecate-ember-k.html">0178-deprecate-ember-k</a></li><li><a href="0181-deprecate-ember-data-initializers.html">0181-deprecate-ember-data-initializers</a></li><li><a href="0186-track-unique-history-location-state.html">0186-track-unique-history-location-state</a></li><li><a href="0191-deprecate-component-lifecycle-hook-args.html">0191-deprecate-component-lifecycle-hook-args</a></li><li><a href="0194-deprecate-custom-event-manager.html">0194-deprecate-custom-event-manager</a></li><li><a href="0213-custom-components.html">0213-custom-components</a></li><li><a href="0225-ember-engines-mount-params.html">0225-ember-engines-mount-params</a></li><li><a href="0226-named-blocks.html">0226-named-blocks</a></li><li><a href="0229-deprecate-testing-restricted-resolver.html">0229-deprecate-testing-restricted-resolver</a></li><li><a href="0232-simplify-qunit-testing-api.html">0232-simplify-qunit-testing-api</a></li><li><a href="0236-deprecation-ember-string.html">0236-deprecation-ember-string</a></li><li><a href="0237-deprecation-ember-map.html">0237-deprecation-ember-map</a></li><li><a href="0240-es-classes.html">0240-es-classes</a></li><li><a href="0252-browser-support-changes.html">0252-browser-support-changes</a></li><li><a href="0268-acceptance-testing-refactor.html">0268-acceptance-testing-refactor</a></li><li><a href="0272-deprecation-native-function-prototype-extensions.html">0272-deprecation-native-function-prototype-extensions</a></li><li><a href="0276-named-args.html">0276-named-args</a></li><li><a href="0278-template-only-components.html">0278-template-only-components</a></li><li><a href="0280-remove-application-wrapper.html">0280-remove-application-wrapper</a></li><li><a href="0281-es5-getters.html">0281-es5-getters</a></li><li><a href="0286-block-let-template-helper.html">0286-block-let-template-helper</a></li><li><a href="0287-promote-in-element-to-public-api.html">0287-promote-in-element-to-public-api</a></li><li><a href="0293-record-data.html">0293-record-data</a></li><li><a href="0294-optional-jquery.html">0294-optional-jquery</a></li><li><a href="0297-deprecate-ember-logger.html">0297-deprecate-ember-logger</a></li><li><a href="0300-rfc-process-update.html">0300-rfc-process-update</a></li><li><a href="0308-deprecate-property-lookup-fallback.html">0308-deprecate-property-lookup-fallback</a></li><li><a href="0311-angle-bracket-invocation.html">0311-angle-bracket-invocation</a></li><li><a href="0318-array-helper.html">0318-array-helper</a></li><li><a href="0322-deprecate-copy-copyable.html">0322-deprecate-copy-copyable</a></li><li><a href="0324-deprecate-component-isvisible.html">0324-deprecate-component-isvisible</a></li><li><a href="0326-ember-data-filter-deprecation.html">0326-ember-data-filter-deprecation</a></li><li><a href="0329-deprecated-ember-evented-in-ember-data.html">0329-deprecated-ember-evented-in-ember-data</a></li><li><a href="0331-deprecate-globals-resolver.html">0331-deprecate-globals-resolver</a></li><li><a href="0332-ember-data-record-links-and-meta.html">0332-ember-data-record-links-and-meta</a></li><li><a href="0335-deprecate-send-action.html">0335-deprecate-send-action</a></li><li><a href="0337-native-class-constructor-update.html">0337-native-class-constructor-update</a></li><li><a href="0340-deprecate-ember-merge.html">0340-deprecate-ember-merge</a></li><li><a href="0345-discord.html">0345-discord</a></li><li><a href="0364-roadmap-2018.html">0364-roadmap-2018</a></li><li><a href="0369-deprecate-computed-clobberability.html">0369-deprecate-computed-clobberability</a></li><li><a href="0370-deprecate-computed-volatile.html">0370-deprecate-computed-volatile</a></li><li><a href="0372-ember-data-model-factory-for.html">0372-ember-data-model-factory-for</a></li><li><a href="0373-Element-Modifier-Managers.html">0373-Element-Modifier-Managers</a></li><li><a href="0375-deprecate-computed-property-modifier.html">0375-deprecate-computed-property-modifier</a></li><li><a href="0386-remove-jquery.html">0386-remove-jquery</a></li><li><a href="0389-dynamic-tag-names.html">0389-dynamic-tag-names</a></li><li><a href="0391-router-helpers.html">0391-router-helpers</a></li><li><a href="0392-deprecate-component-manager-string-lookup.html">0392-deprecate-component-manager-string-lookup</a></li><li><a href="0395-ember-data-packages.html">0395-ember-data-packages</a></li><li><a href="0398-RouteInfo-Metadata.html">0398-RouteInfo-Metadata</a></li><li><a href="0403-ember-data-identifiers.html">0403-ember-data-identifiers</a></li><li><a href="0408-decorators.html">0408-decorators</a></li><li><a href="0410-tracked-properties.html">0410-tracked-properties</a></li><li><a href="0415-render-element-modifiers.html">0415-render-element-modifiers</a></li><li><a href="0416-glimmer-components.html">0416-glimmer-components</a></li><li><a href="0418-deprecate-route-render-methods.html">0418-deprecate-route-render-methods</a></li><li><a href="0421-deprecate-application-controller-props.html">0421-deprecate-application-controller-props</a></li><li><a href="0425-website-redesign.html">0425-website-redesign</a></li><li><a href="0431-guides-restructure.html">0431-guides-restructure</a></li><li><a href="0432-contextual-helpers.html">0432-contextual-helpers</a></li><li><a href="0435-modifier-splattributes.html">0435-modifier-splattributes</a></li><li><a href="0440-decorator-support.html">0440-decorator-support</a></li><li><a href="0445-deprecate-with.html">0445-deprecate-with</a></li><li><a href="0446-contribution-guides.html">0446-contribution-guides</a></li><li><a href="0449-deprecate-partials.html">0449-deprecate-partials</a></li><li><a href="0451-injection-parameter-normalization.html">0451-injection-parameter-normalization</a></li><li><a href="0452-ember-data-medium-term-plan.html">0452-ember-data-medium-term-plan</a></li><li><a href="0457-nested-lookups.html">0457-nested-lookups</a></li><li><a href="0459-angle-bracket-built-in-components.html">0459-angle-bracket-built-in-components</a></li><li><a href="0460-yieldable-named-blocks.html">0460-yieldable-named-blocks</a></li><li><a href="0461-ember-data-singleton-record-data.html">0461-ember-data-singleton-record-data</a></li><li><a href="0463-record-data-state.html">0463-record-data-state</a></li><li><a href="0465-record-data-errors.html">0465-record-data-errors</a></li><li><a href="0466-request-state-service.html">0466-request-state-service</a></li><li><a href="0468-classic-decorator.html">0468-classic-decorator</a></li><li><a href="0470-fn-helper.html">0470-fn-helper</a></li><li><a href="0471-on-modifier.html">0471-on-modifier</a></li><li><a href="0477-blueprints-update.html">0477-blueprints-update</a></li><li><a href="0478-tracked-properties-updates.html">0478-tracked-properties-updates</a></li><li><a href="0481-component-templates-co-location.html">0481-component-templates-co-location</a></li><li><a href="0486-deprecate-mouseenter.html">0486-deprecate-mouseenter</a></li><li><a href="0487-custom-model-classes.html">0487-custom-model-classes</a></li><li><a href="0491-deprecate-disconnect-outlet.html">0491-deprecate-disconnect-outlet</a></li><li><a href="0494-async-observers.html">0494-async-observers</a></li><li><a href="0496-handlebars-strict-mode.html">0496-handlebars-strict-mode</a></li><li><a href="0507-embroider-v2-package-format.html">0507-embroider-v2-package-format</a></li><li><a href="0519-2019-2020-roadmap.html">0519-2019-2020-roadmap</a></li><li><a href="0521-find-by-identifier.html">0521-find-by-identifier</a></li><li><a href="0522-default-serializers-and-adapters.html">0522-default-serializers-and-adapters</a></li><li><a href="0523-model-argument-for-route-templates.html">0523-model-argument-for-route-templates</a></li><li><a href="0554-deprecate-getwithdefault.html">0554-deprecate-getwithdefault</a></li><li><a href="0558-edition-detection.html">0558-edition-detection</a></li><li><a href="0580-destroyables.html">0580-destroyables</a></li><li><a href="0581-new-test-waiters.html">0581-new-test-waiters</a></li><li><a href="0585-improved-ember-registry-apis.html">0585-improved-ember-registry-apis</a></li><li><a href="0615-autotracking-memoization.html">0615-autotracking-memoization</a></li><li><a href="0617-rfc-stages.html">0617-rfc-stages</a></li><li><a href="0625-helper-managers.html">0625-helper-managers</a></li><li><a href="0626-invoke-helper.html">0626-invoke-helper</a></li><li><a href="0628-prettier.html">0628-prettier</a></li><li><a href="0631-refresh-method-for-router-service.html">0631-refresh-method-for-router-service</a></li><li><a href="0635-ember-new-lang.html">0635-ember-new-lang</a></li><li><a href="0637-customizable-test-setups.html">0637-customizable-test-setups</a></li><li><a href="0638-interactive-app-creation.html">0638-interactive-app-creation</a></li><li><a href="0639-replace-blacklist-whitelist.html">0639-replace-blacklist-whitelist</a></li><li><a href="0645-add-ember-page-title-addon.html">0645-add-ember-page-title-addon</a></li><li><a href="0649-deprecation-staging.html">0649-deprecation-staging</a></li><li><a href="0659-unique-id-helper.html">0659-unique-id-helper</a></li><li><a href="0671-modernize-built-in-components-1.html" class="active">0671-modernize-built-in-components-1</a></li><li><a href="0673-deprecate-tryinvoke.html">0673-deprecate-tryinvoke</a></li><li><a href="0674-deprecate-transition-methods-of-controller-and-route.html">0674-deprecate-transition-methods-of-controller-and-route</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title"></h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <hr />
<p>Start Date: 2020-10-02
Relevant Team(s): Ember.js
RFC PR: https://github.com/emberjs/rfcs/pull/671</p>
<hr />
<h1><a class="header" href="#stop-leaking-implementation-details-of-built-in-components" id="stop-leaking-implementation-details-of-built-in-components">Stop Leaking Implementation Details of Built-in Components</a></h1>
<h2><a class="header" href="#summary" id="summary">Summary</a></h2>
<p>In order to stop leaking implementation details of built-in components, we
propose to:</p>
<ol>
<li>Deprecate importing the following modules
<ol>
<li><code>@ember/component/checkbox</code></li>
<li><code>@ember/component/text-area</code></li>
<li><code>@ember/component/text-field</code></li>
<li><code>@ember/routing/link-component</code></li>
</ol>
</li>
<li>Deprecate accessing the following properties on the <code>Ember</code> global
<ol>
<li><code>Ember.Checkbox</code></li>
<li><code>Ember.LinkComponent</code></li>
<li><code>Ember.TextArea</code></li>
<li><code>Ember.TextField</code></li>
<li><code>Ember.TextSupport</code> (already private, no import path available)</li>
</ol>
</li>
<li>Deprecate calling <code>reopen</code> or <code>reopenClass</code> on the classes and mixins listed
above, whether they were obtained through an import or the <code>Ember</code> global</li>
<li>Deprecate calling <code>reopen</code> or <code>reopenClass</code> on the <code>Ember.Component</code> super
class (which is also the default export of <code>@ember/component</code>), but not when
called on a subclass of <code>Ember.Component</code> other than those listed above</li>
<li>Deprecate calling <code>lookup</code> or <code>factoryFor</code> on an <code>Owner</code> with the following
specifiers
<ol>
<li><code>component:input</code></li>
<li><code>component:link-to</code></li>
<li><code>component:textarea</code></li>
<li><code>component:-checkbox</code> (already considered private)</li>
<li><code>component:-text-field</code> (already considered private)</li>
<li><code>template:component/input</code></li>
<li><code>template:component/link-to</code></li>
<li><code>template:component/textarea</code></li>
<li><code>template:component/-checkbox</code> (already considered private)</li>
<li><code>template:component/-text-field</code> (already considered private)</li>
</ol>
</li>
<li>Deprecate overriding the following factories on an <code>Owner</code>, through placing
files the corresponding locations in the <code>app</code> tree or through any other
means such as runtime registrations or using a custom <code>Resolver</code>
<ol>
<li><code>component:-checkbox</code></li>
<li><code>component:-text-field</code></li>
<li><code>template:component/input</code></li>
<li><code>template:component/link-to</code></li>
<li><code>template:component/textarea</code></li>
<li><code>template:component/-checkbox</code> (already considered private)</li>
<li><code>template:component/-text-field</code> (already considered private)</li>
</ol>
</li>
</ol>
<h2><a class="header" href="#motivation" id="motivation">Motivation</a></h2>
<p>The ultimate goal is to stop leaking implementation details of built-in
components and be able to move away from subclassing <code>Ember.Component</code> in their
internal implementations.</p>
<p>This RFC is part of a bigger plan to accomplish this goal, which requires at
least one other follow-up RFC. This section will attempt to provide context for
this overall plan. Please note that this RFC does not attempt to address every
problem mentioned here and should ultimately be evaluated on its own merits.</p>
<h3><a class="header" href="#the-problems" id="the-problems">The Problems</a></h3>
<p>Ember's built-in components, that is <code>&lt;Input&gt;</code>, <code>&lt;Textarea&gt;</code> and <code>&lt;LinkTo&gt;</code>,
are currently implemented as subclasses of <code>Ember.Component</code>, also known as the
&quot;classic&quot; component API. This made sense historically, as that was the only
component API available in Ember at the time. While this is arguably an
implementation detail, in practice, this aspect of their implementations has
leaked and become relied upon.</p>
<p>Since then, we have identified some design flaws of the <code>Ember.Component</code> API,
which motivated the <a href="0213-custom-components.html">Custom Components</a> and
<a href="0416-glimmer-components.html">Glimmer Components</a> API, the latter of which
became the primary component programming model in modern Ember as of the
<a href="0364-roadmap-2018.html">Octane Edition</a>.</p>
<p>The same design flaws of <code>Ember.Component</code> that impacted Ember app developers
have also had an impact on these built-in components, and we would like to move
away from their legacy implementation for largely the same reason as Ember app
developers.</p>
<hr />
<p>The most concerning aspect of these design flaws was that any named arguments
passed to a classic component during invocation will be set as properties on
the component instance. For example:</p>
<pre><code class="language-hbs">{{!-- This is NOT supported, do not do this! --}}
&lt;Input
  @init={{this.customInit}}
  @willDestroyElement={{this.customWillDestroyElement}}
/&gt;
</code></pre>
<p>Here, the <code>@init</code> and <code>@willDestroyElement</code> arguments will be made available as
<code>instance.init</code> and <code>instance.willDestroyElement</code>, essentially replacing and
overriding the <code>init</code> and <code>willDestroyElement</code> methods on the component class,
which are part of the <code>Ember.Object</code> and <code>Ember.Component</code> API, respectively.</p>
<p>Clearly, this is not something that we intended to support, but it is simply a
consequence that falls out of the design of the <code>Ember.Component</code> API design.</p>
<p>A more likely example of this is the event handling hooks that we inherited
from <code>Ember.Component</code>. In classic components, the way to handle events on the
component's element is to implement hooks like <code>click()</code> and <code>keyDown()</code> on the
component class, which is what the implementation of the component does.</p>
<p>Even though these hooks considered private implementation details (and <a href="https://github.com/emberjs/ember.js/blob/74a99a2971d327783b23a1093cf9564265db1a9d/packages/%40ember/-internals/views/lib/mixins/text_support.js#L299">clearly
marked as such</a>),
developers have observed that they can pass callbacks into arguments of the
same name during invocation, and they will be called when the corresponding
events are dispatched to the components. For example:</p>
<pre><code class="language-hbs">{{!-- This is NOT supported, do not do this! --}}
&lt;Input
  @click={{this.myClickCallback}}
  @focusIn={{this.myFocusInCallback}}
  @keyDown={{this.myKeyDownCallback}}
/&gt;
</code></pre>
<p>This is essentially the same category of bugs as passing <code>@init</code> as an
argument, but it has become relatively common practice and even made it into
the official guides at one point (this is currently being addressed).</p>
<hr />
<p>On top of this, until <a href="0311-angle-bracket-invocation.html">Angle Bracket Invocations</a>
were introduced, there was no convenient way of passing HTML attributes to a
component. Components implemented using the <code>Ember.Component</code> API relied on the
<code>attributeBindings</code> API to map instance properties to HTML attributes.</p>
<p>The built-in components were historically bound by the same constraints, so
they are documented to take <a href="https://github.com/emberjs/ember.js/blob/74a99a2971d327783b23a1093cf9564265db1a9d/packages/%40ember/-internals/glimmer/lib/components/text-field.ts#L62-L122">a large amount of HTML attributes as arguments</a>.</p>
<p>Post-Octane, this has caused some confusion as to what should be passed as
arguments and what should be passed as HTML attributes using the angle bracket
invocation syntax. With a few rare exceptions, the latter should suffice and
the named arguments are mostly obsolete at this point.</p>
<hr />
<p>Similarly, until <a href="0373-Element-Modifier-Managers.html">modifiers</a> were available
<a href="0435-modifier-splattributes.html">with Angle Bracket Invocations</a> and the
<a href="0471-on-modifier.html">{{on}} Modifier</a> was introduced, there was no first-class
API for listening to DOM events on components you do not control. This required
the component authors to enumerate events they want to expose and accept them
as callback arguments, manually dispatching them in the <code>Ember.Component</code>
event-handling hooks.</p>
<p>The built-in components were historically bound by the same constraints here
as well. Before modifiers, the <a href="https://github.com/emberjs/ember.js/blob/74a99a2971d327783b23a1093cf9564265db1a9d/packages/%40ember/-internals/views/lib/mixins/text_support.js#L87-L108">documented way</a>
of handling events on the built-in input components are via the &quot;dasherized&quot;
named arguments, such as <code>&lt;Input @key-down={{this.myAction}} /&gt;</code>.</p>
<p>However, as mentioned above, due to the way arguments are handled, the event
handling hooks inherited from <code>Ember.Component</code> were frequently misused
instead, which would prevent these &quot;dasherized&quot; callbacks from running, as they
would overwrite the re-dispatching logic.</p>
<p>On top of this, there has also been <a href="https://github.com/emberjs/ember.js/pull/18997">a bug</a>
that prevented these callback arguments from working reliably. Unfortunately,
this was not investigated in a timely manner and was only fixed very recently.
This nudged developers towards the incorrect approaches even more and further
propagated the confusion, some of which has made their way into the official
learning materials (this is currently being addressed).</p>
<hr />
<p>In addition, for a variety of historical reasons, the implementation of the
built-in components, that is, the <code>Checkbox</code>, <code>LinkComponent</code>, <code>TextArea</code> and
<code>TextField</code> component classes were documented as public API, as well as the
<code>TextSupport</code> mixin, which is considered private but is well-documented and is
accessible through the <code>Ember</code> global.</p>
<p>Because of this, the fact that they are implemented as <code>Ember.Component</code>
subclasses are highly observable. Some common use cases and consequences are:</p>
<ol>
<li>
<p>These classes can be imported for subclassing. For example, an app can
export a custom subclass of <code>TextField</code> at, say, <code>app/components/my-text-field.js</code>
which can then be invoked as <MyTextField>.</p>
</li>
<li>
<p>These classes can be reopened to modify the behavior of the built-in
components. For example, this will add a CSS class to all <code>&lt;Input&gt;</code>
components rendered in the app:</p>
<pre><code class="language-js">import TextField from '@ember/component/text-field';

TextField.reopen({
  classNames: ['i-am-a-text-field']
});
</code></pre>
<p>Likewise, <code>reopenClass</code> can be used to modify the class itself.</p>
</li>
<li>
<p>Similar to the above, reopening the <code>Ember.Component</code> super class will
affect all built-in components as well. For example, this will also add a
CSS class to all built-in components rendered in the app:</p>
<pre><code class="language-js">import Component from '@ember/component';

Component.reopen({
  classNames: ['i-am-a-component']
});
</code></pre>
<p>Likewise, <code>reopenClass</code> can be used to modify the super class itself, which
will be inherited by the built-in component classes.</p>
</li>
<li>
<p>It is possible to lookup (or even replace) the built-in components using the
<code>owner.factoryFor</code> and <code>owner.lookup</code> runtime APIs.</p>
</li>
</ol>
<p>These are all opportunities for the internal implementation to leak, therefore
making changes to how the built-in components are implemented – specifically
stop subclassing from <code>Ember.Component</code> – will likely be a breaking change for
some, even if the new implementations otherwise supported all documented APIs
perfectly.</p>
<h3><a class="header" href="#the-plan" id="the-plan">The Plan</a></h3>
<p>At their core, the designs of the built-in components are rather simple. Take
the <code>&lt;Input&gt;</code> component for example, its job is to provide a convince on top of
the native <code>&lt;input&gt;</code> element. It accepts <code>@type</code> and <code>@value</code> (or <code>@checked</code>)
as arguments and keeps the underlying <code>&lt;input&gt;</code> element in sync with the given
app state.</p>
<p>That description should cover 90% of what the average developer need to know
about this component. It should feel pretty similar to using any other modern
components in the Ember ecosystem – attributes can be passed in angle bracket
invocation, and native events can be listened to with the <code>{{on}}</code> modifier.</p>
<p>There is a little bit extra this component does – it takes callbacks for some
higher-level &quot;logical events&quot; such as <code>@enter</code> and <code>@escape-press</code>. Arguably
these aren't strictly necessary with the ubiquity of the <code>{{on}}</code> modifier or
specialized addons like <a href="http://adopted-ember-addons.github.io/ember-keyboard/usage">ember-keyboard</a>.
Perhaps we wouldn't have introduced these features today, but since there is
not a direct 1:1 translation to migrate away and there aren't really anything
wrong with them, we are not proposing to remove them to avoid needless churn.</p>
<p>Beyond that, everything else that is now redundant or obselete (such as named
arguments that exists purely for binding HTML attributes and callback arguments
that have corresponding native events) should be deprecated and removed.</p>
<p>Concretely, the plan is to:</p>
<ol>
<li>Deprecate and remove any mechanisms that could leak the implementation</li>
<li>Deprecate and remove any features that are specific to <code>Ember.Component</code></li>
<li>Deprecate and remove any redundant or obselete features</li>
</ol>
<p>This RFC focuses on the first step, and the rest will be proposed separately
in follow-up RFC(s).</p>
<h2><a class="header" href="#detailed-design" id="detailed-design">Detailed design</a></h2>
<p>This RFC proposes the following deprecations:</p>
<ol>
<li>Deprecate importing the following modules
<ol>
<li><code>@ember/component/checkbox</code></li>
<li><code>@ember/component/text-area</code></li>
<li><code>@ember/component/text-field</code></li>
<li><code>@ember/routing/link-component</code></li>
</ol>
</li>
<li>Deprecate accessing the following properties on the <code>Ember</code> global
<ol>
<li><code>Ember.Checkbox</code></li>
<li><code>Ember.LinkComponent</code></li>
<li><code>Ember.TextArea</code></li>
<li><code>Ember.TextField</code></li>
<li><code>Ember.TextSupport</code> (already private, no import path available)</li>
</ol>
</li>
<li>Deprecate calling <code>reopen</code> or <code>reopenClass</code> on the classes and mixins listed
above, whether they were obtained through an import or the <code>Ember</code> global</li>
<li>Deprecate calling <code>reopen</code> or <code>reopenClass</code> on the <code>Ember.Component</code> super
class (which is also the default export of <code>@ember/component</code>), but not when
called on a subclass of <code>Ember.Component</code> other than those listed above</li>
<li>Deprecate calling <code>lookup</code> or <code>factoryFor</code> on an <code>Owner</code> with the following
specifiers
<ol>
<li><code>component:input</code></li>
<li><code>component:link-to</code></li>
<li><code>component:textarea</code></li>
<li><code>component:-checkbox</code> (already considered private)</li>
<li><code>component:-text-field</code> (already considered private)</li>
<li><code>template:component/input</code></li>
<li><code>template:component/link-to</code></li>
<li><code>template:component/textarea</code></li>
<li><code>template:component/-checkbox</code> (already considered private)</li>
<li><code>template:component/-text-field</code> (already considered private)</li>
</ol>
</li>
<li>Deprecate overriding the following factories on an <code>Owner</code>, through placing
files the corresponding locations in the <code>app</code> tree or through any other
means such as runtime registrations or using a custom <code>Resolver</code>
<ol>
<li><code>component:-checkbox</code></li>
<li><code>component:-text-field</code></li>
<li><code>template:component/input</code></li>
<li><code>template:component/link-to</code></li>
<li><code>template:component/textarea</code></li>
<li><code>template:component/-checkbox</code> (already considered private)</li>
<li><code>template:component/-text-field</code> (already considered private)</li>
</ol>
</li>
</ol>
<p>The first two sets of deprecations removes the classes themselves from being
public APIs.</p>
<p>In order to support apps that have implemented custom components by subclassing
these built-in classes, the current implementations will be moved to a legacy
addon and remain &quot;frozen&quot; in there. Future versions of Ember will stop basing
the built-in components on these legacy implementaitons, but custom subclasses
will continue to work. The deprecation message should provide information about
this legacy addon, or link to the deprecation details page that does.</p>
<p>The third and forth prevents globally modifiying the behavior of built-in
components. Users are encouraged to create wrapper components for use in their
apps or create custom subclasses using the legacy addon.</p>
<p>The fifth deprecation prevents leakage of the classes to runtime code, which is
complimentary to the first two sets of deprecations.</p>
<p>The last group of deprecation prevents partially replacing the built-in
components, such as replacing only the template but not the class.</p>
<p>Notably, the last group of deprecation does not prevent replacing the built-in
components in general, by defining a component with the same name. While this
is not necessarily <em>encouraged</em> and would certainly be confusing for developers
and tools alike, we do not intend to &quot;reserve&quot; the built-in component names, so
if an app provides a component with the same name, they will take precedence
over the built-in components.</p>
<h2><a class="header" href="#transition-path" id="transition-path">Transition Path</a></h2>
<h3><a class="header" href="#importing-and-accessing-globals-for-subclassing" id="importing-and-accessing-globals-for-subclassing">Importing and Accessing Globals For Subclassing</a></h3>
<p>Example deprecation message:</p>
<pre><code>Using Ember.Checkbox or importing from '@ember/component/checkbox' has been
deprecated, install the `ember-legacy-built-in-components` addon and use
`import { Checkbox } from 'ember-legacy-built-in-components';` instead.
</code></pre>
<hr />
<p>Example that causes deprecation:</p>
<pre><code class="language-js">import Checkbox from '@ember/component/checkbox';
//                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~
// Using Ember.Checkbox or importing from '@ember/component/checkbox' has been
// deprecated, install the `ember-legacy-built-in-components` addon and use
// `import { Checkbox } from 'ember-legacy-built-in-components';` instead.

export class MyCheckbox extends Checkbox {
  // ...
}
</code></pre>
<p>Fixed example:</p>
<pre><code class="language-js">import { Checkbox } from '@ember/legacy-built-in-components';

export class MyCheckbox extends Checkbox {
  // ...
}
</code></pre>
<hr />
<p>Alternative example that triggers the deprecation:</p>
<pre><code class="language-js">export function initialize(owner) {
  owner.register(
    'component:my-checkbox',
    Ember.Checkbox.extend({ /* ... */ })
//  ~~~~~~~~~~~~~~
// Using Ember.Checkbox or importing from '@ember/component/checkbox' has been
// deprecated, install the `ember-legacy-built-in-components` addon and use
// `import { Checkbox } from 'ember-legacy-built-in-components';` instead.
  );
}
</code></pre>
<p>Fixed example:</p>
<pre><code class="language-js">import { Checkbox } from '@ember/legacy-built-in-components';

export function initialize(owner) {
  owner.register(
    'component:my-checkbox',
    Checkbox.extend({ /* ... */ })
  );
}
</code></pre>
<hr />
<p>Additional prose in the deprecation guide:</p>
<blockquote>
<p>The implementation of the built-in components are no longer based on these
legacy classes, so they are now unused by the framework and will be removed
in the future.</p>
<p>If you have implemented custom subclasses of these components, you can
install the <code>@ember/legacy-built-in-components</code> addon. This addon vendors the
legacy classes and make them available for import. See the addon's README for
more details.</p>
<p>Note that this addon merely makes the legacy classes available, it does not
&quot;restore&quot; the built-in components' implementation to be based on these legacy
classes.</p>
</blockquote>
<h3><a class="header" href="#reopening-legacy-built-in-component-classes" id="reopening-legacy-built-in-component-classes">Reopening Legacy Built-in Component Classes</a></h3>
<p>Example deprecation message:</p>
<pre><code>Reopening Ember.Checkbox has been deprecated. Consider implementing your own
wrapper component or create a custom subclass.
</code></pre>
<hr />
<p>Example that causes deprecation:</p>
<pre><code class="language-js">import Checkbox from '@ember/component/checkbox';
//                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~
// This still triggers the deprecation from above

Checkbox.reopen({
//      ~~~~~~~
// Reopening Ember.Checkbox has been deprecated. Consider implementing your own
// wrapper component or create a custom subclass.
  attributeBindings: ['metadata:data-my-metadata'],
  metadata: ''
});
</code></pre>
<p>Fixed example:</p>
<pre><code class="language-hbs">{{!-- app/components/my-checkbox.hbs --}}

&lt;Input
  @type=&quot;checkbox&quot;
  @checked={{@checked}}
  ...attributes
  data-my-metadata={{@metadata}}
/&gt;
</code></pre>
<hr />
<p>Alternative example that triggers the deprecation:</p>
<pre><code class="language-js">import Checkbox from '@ember/component/checkbox';
//                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~
// This still triggers the deprecation from above

Checkbox.reopen({
//      ~~~~~~~
// Reopening Ember.Checkbox has been deprecated. Consider implementing your own
// wrapper component or create a custom subclass.
  change(...args) {
    console.log('changed');
    this._super(...args);
  }
})
</code></pre>
<p>Fixed example:</p>
<pre><code class="language-js">// app/components/my-checkbox.js

import { Checkbox } from '@ember/legacy-built-in-components';

export default class MyCheckbox extends Checkbox {
  change(...args) {
    console.log('changed');
    super.change(...args);
  }
}
</code></pre>
<hr />
<p>Additional prose in the deprecation guide:</p>
<blockquote>
<p>The implementation of the built-in components are no longer based on these
legacy classes, so reopening them will soon have no effect.</p>
<p>To customize the behavior of these built-in components, create your own
wrapper components as a template-only component and invoke that instead.</p>
<p>Alternatively, you may also implement your own customized version of the
component installing the <code>@ember/legacy-built-in-components</code> addon. This
addon vendors the legacy classes and make them available for subclassing. See
the addon's README for more details.</p>
<p>Note that this addon merely makes the legacy classes available, it does not
&quot;restore&quot; the built-in components' implementation to be based on these legacy
classes. You cannot simply reopen the classes provided by this addon.</p>
</blockquote>
<h3><a class="header" href="#reopening-classic-component-super-class" id="reopening-classic-component-super-class">Reopening Classic Component Super Class</a></h3>
<p>Example deprecation message:</p>
<pre><code>Reopening the Ember.Component super class itself has been deprecated. Consider
alternatives such as installing event listeners on the document or add the
customizations to specific subclasses.
</code></pre>
<hr />
<p>Example that causes deprecation:</p>
<pre><code class="language-js">import Component from '@ember/component';

Component.reopen({
//       ~~~~~~~
// Reopening the Ember.Component super class itself has been deprecated. Consider
// alternatives such as installing event listeners on the document or add the
// customizations to specific subclasses.
  click() {
    console.log('Clicked on a classic component');
  }
});
</code></pre>
<p>Fixed example:</p>
<pre><code class="language-js">document.addEventListener('click', event =&gt; {
  if (e.target.classList.contains('ember-view')) {
    console.log('Clicked on a classic component');
  }
});
</code></pre>
<hr />
<p>Alternative example that triggers the deprecation:</p>
<pre><code class="language-js">import Component from '@ember/component';

Component.reopen({
//       ~~~~~~~
// Reopening the Ember.Component super class itself has been deprecated. Consider
// alternatives such as installing event listeners on the document or add the
// customizations to specific subclasses.
  attributeBindings: ['metadata:data-my-metadata'],
  metadata: ''
});
</code></pre>
<p>Fixed example:</p>
<pre><code class="language-js">// app/components/base.js

import Component from '@ember/component';

// Subclass from this in your app, instead of subclassing from Ember.Component
export default Component.extend({
  attributeBindings: ['metadata:data-my-metadata'],
  metadata: ''
});
</code></pre>
<hr />
<p>Additional prose in the deprecation guide:</p>
<blockquote>
<p>Reopening a the <code>Ember.Component</code> super class is dangerous and has
far-reaching consequences. For example, it may unexpectedly break addons that
are not expecting the changes.</p>
<p>To respond to DOM events globally, consider using global event listeners
instead.</p>
<p>Alternatively, you may create a custom subclass of <code>Ember.Component</code> with the
behavior you want and subclass from that in your app. That way, only those
components which explictly opted into the changes will be affected.</p>
</blockquote>
<h3><a class="header" href="#runtime-lookups" id="runtime-lookups">Runtime Lookups</a></h3>
<p>Example deprecation message:</p>
<pre><code>Looking up `component:input` is deprecated. The implementations of the built-in
components are considered private and should not be relied upon. In the future,
the runtime registry will no longer contain entries for built-in components.
</code></pre>
<hr />
<p>Example that causes deprecation:</p>
<pre><code class="language-js">this.owner.lookup('component:input');
</code></pre>
<p>Fixed example:</p>
<p><strong>(None)</strong></p>
<h3><a class="header" href="#partial-registration-override" id="partial-registration-override">Partial Registration Override</a></h3>
<p>Example deprecation message:</p>
<pre><code>Registering `component:-checkbox` or having a `app/components/-checkbox`
module in your app is deprecated. To replace the `&lt;Input&gt;` built-in component,
you must fully replace it in its entirity, by registering `component:input` or
defining a `app/components/input` module.
</code></pre>
<hr />
<p>Example that causes deprecation:</p>
<pre><code class="language-js">// app/components/-checkbox.js

import Component from '@glimmer/component';

export default class MyBetterCheckbox extends Component {
  // ...only handles &lt;Input @type=&quot;checkbox&quot; /&gt;
}
</code></pre>
<p>Fixed example:</p>
<pre><code class="language-js">// app/components/input.js

import Component from '@glimmer/component';

export default class MyBetterInput extends Component {
  // ...must handle all cases of &lt;Input /&gt;
}
</code></pre>
<h2><a class="header" href="#how-we-teach-this" id="how-we-teach-this">How we teach this</a></h2>
<p>The API documentation should be updated to document the built-in components as
components, not as classes. When reaidng the documentation, developers should
be able to understand the components in terms of what <em>arguments</em> they are able
to pass. The exact format for documenting components is left unspecified to
provide the learning team some flexibility in accomplish this goal.</p>
<h2><a class="header" href="#drawbacks" id="drawbacks">Drawbacks</a></h2>
<p>Apps that heavily customizes the built-in components will have to put in some
work to migrate, though this is largely mitigated by making the existing
implementations available through the legacy addon.</p>
<h2><a class="header" href="#alternatives" id="alternatives">Alternatives</a></h2>
<ul>
<li>
<p>We can leave the existing built-in components around, ship new, modernized
versions under new names, without deprecating the old ones. This will create
more cruft and confusion in the long run, as may be difficult for developers
to determine which ones are the recommended ones.</p>
</li>
<li>
<p>We can leave the existing built-in components around, ship new, modernized
versions under new names, and deprecating the old ones. Assuming the new
components are roughly a subset of the existing ones, this will have more or
less the same end result as the plan laid out above, but possibly with more
intermediate churn.</p>
<p>In this case, developers would have to figure out how to refactor away from
legacy features that are no longer supported by the new version before they
could fully migrate, similar to how developers are migrating from classic to
Glimmer components today.</p>
<p>By deprecating and removing individual features, as proposed in this plan, we
will be able to provide more directly actionable guidance in each case.</p>
</li>
<li>
<p>We can remove the built-in components altogether. This is a much bigger lift
that would require analyising all existing use cases and likely requires
designing new capabilities and features to fill some of those gaps.</p>
<p>Other than the problems outlined in this RFC, the built-in components mostly
get the job done adequately, and we feel like there is not a lot of value in
taking on the project to reimagine them significantly and force the entire
community to migrate to completely new patterns at this moment.</p>
<p>Our preference would therefore be to pare down the existing components to
address the problems raised here. In the meantime, we will work on providing
primitives and capabilities that underpins these built-in components (such as
<a href="0391-router-helpers.html">router helpers</a>), so the community can experiment
with alternatives and new patterns.</p>
<p>If and when they mature to the point of becoming widely accepted as best
practices in the ecosystem, we can revisit deprecating and removing any of
these built-in components as they become redundant. Broadly speaking, we do
not believe we are at that point yet, so in the meantime, we should not stop
improving what we have.</p>
</li>
</ul>
<h2><a class="header" href="#unresolved-questions" id="unresolved-questions">Unresolved questions</a></h2>
<p>None.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="0659-unique-id-helper.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="0673-deprecate-tryinvoke.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="0659-unique-id-helper.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="0673-deprecate-tryinvoke.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
